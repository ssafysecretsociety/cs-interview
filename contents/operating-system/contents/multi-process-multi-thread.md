# 멀티 프로세스와 멀티 스레드

- 한 프로그램이 실행되기위해 프로세스 상태에 있다면 다른 프로그램은 실행이 불가하다.
- 하지만 동시성의 개념으로 우리는 여러가지 작업을 동시에 수행하는 것 처럼 느낄 수 있다.
  - 동시성: 아주 짧은 텀으로 계속해서 왔다갔다해서 하나로 보이는 상태


## 멀티 프로세스 vs 멀티 스레드
- 둘을 구분할 때, **한 어플리케이션에 대한 처리 방식의 일종**이라고 생각하면 편하다.

### 멀티 프로세스
- 하나의 작업을 여러 개의 프로세스가 처리
- 각각의 프로세스는 독립적
- IPC를 사용한 통신
- 자원 소모적, 개별 메모리 차지
- `Context Switching` 비용이 큼
- **동기화 작업이 필요 X**

### 멀티 스레드
- 스레드끼리 긴밀하게 연결
- 공유된 자원의 사용 (스택을 제외한 코드, 힙, 데이터)
  - 통신 비용 절감
  - 메모리 효율적 관리
- `Context Switching` 비용이 적음
- **공유자원 관리 필요**

### 단점이 많아보이는 멀티 프로세스를 사용하는 이유는?
- `크롬` vs `IE`를 예시로 들 수 있다.
- IE의 경우 여러 탭 중 하나에서 오류가 발생한다면 모두가 종료된다.
  - 이는 IE가 멀티스레드를 사용하고 있기 때문이다.
  - 각각의 탭은 공유자원을 사용하고 있기에, 하나에서 오류가 발생하면 모두 영향을 받는다.
- 크롬의 경우 IE에 비해 다른 탭들의 영향을 덜 받는다.
  - 크롬은 멀티프로세스를 사용하고 있기 때문

### 멀티 프로세스의 단점
- `context switch`에 따른 비효율 발생 (stack, heap, data, code를 따로 갖기에)
- 다른 프로세스의 정보를 이용하기 위해서 통신이 필요 -> 스레드의 탄생

### 멀티 스레드의 단점
- 디버깅이 까다로움
- 한 프로세스안의 스레드에 문제가 생기면 같은 프로세스 안의 스레드도 같이 문제가 생김
- 같은 데이터를 공유하기에, 데이터 동기화에 신경 써야함

## 멀티 코어?
- `멀티 스레드`랑 `멀티 프로세스`는 소프트웨어 측면에 가깝다
- 반면에 `멀티 코어`는 하드웨어 측면에 가깝다

## 동시성 vs 병렬처리
- 동시성
  - 하나의 코어에서 하나 이상의 프로세스 (혹은 스레드)가 빠른 텀으로 번갈아 작동하며 동시에 진행되는 것 처럼 보임
- 병렬처리
  - 물리적으로 여러 코어를 사용해서, 다수의 실행단위를 한순간에 처리함


## 문제
- context switch에 비용이 많이 발생하는 처리방식은 무엇인가
- 멀티 스레드를 사용한 프로그램을 만들 때 주의해야할 점은 무엇인가

## 레퍼런스
- [쪼밀리와 오구의 Process vs Thread](https://youtu.be/DmZnOg5Ced8)
- [코다의 Process vs Thread](https://youtu.be/1grtWKqTn50)
